Лекция 9. 
Что такое SOC и с чем его едят? 

C:> whoiam

Как выглядит ИБ в больщих компаниях:
1) система firewall и  ips
2) 


Важно помнить о фишинге, о работе с персоналом, превентивные методы - не панпцея

Уязвимость bluekey (?)

Asssume bleach model:
надо видеть все блоки и предугадывать 
The adaptive security architecture


Respond.


Attack timeline
время атаки в течение продолжительного времени

Система KillChain 
1. разведка (сканирование, определение эксплойта)
2. вооружение (подбор эксплойта)
3. доставка 
4. эксплуатация
5. Закрепление (добавление автозапуска)
6. Управление (cnc ? уточнить )
7. конечная цель

Пример: удалось засечь фишингового домена, 20-30 мин после создания 
	Решение: отправить домен на блокировку не верно. Ибо не обезопасите. Надо дать злоумышленнику пройти, чтобы увидеть возможный путь уязвимости. 

Необходим Security Operation Center  и аналитика.  - взаимодействие технических проццессов обнаружения ,предотвращения угроз иб.
SOC составляет группу из 5 человек, настраивают системы сбора и анализа логов подситемы

Необходимые скилы для soc - инженера:
1) администрирования
2) пентестинг 
3) знание сетевых протоколов
4) знание техник атах / закреплений 
5) работа с системами ids/ips/siem
6) настраивает и собирает логи

Стандартные логи не дают особо ничего.
включение  gpo для чего - набор ограничей для группы 
Sysmon - для дополнительного логирования виндоус машин, собирается больщое количество событий
base64 - power shell. Sysmon  помогает это обнаружить 

UEBA - user and entity behavior

Другие варианты: 
1) перечисление группы администраторов 
	net localgroup aministrators
	net group 
2) процесс запуска от родителя


На линуксе:
osquery -  позволяет логировать события также как и sysmon


Базовый набор логов надо собирать для удовлетворения минимальных потребностей: 
1) клиентские ос
2) ad / dhcp
3) антивирус
4) proxy
vpn (#TODO написать)

IDC/IPS logs - почитать

SIEM - система сбора и аналаза логов.
SIEM.QRADAR - 
Maxbattle - российский заменитель. siem qradar (уточнить название)
SOC.SIEM.Splunk - клевая, но в россии не работает

SOC.SIEM.Rules - пытается обнаружить по в строке sql inj
Примеры регистрируемых событий:
1) вредоносные расслыки
2) появление новых сервисов или задач в планировщике
3) ....


Минус: 
требуется индивидуальная настройка для каждой программы
надо учитывать уровень разработчика

atomic rules vs kill chain  -  (?)

Siem.components -
1) сборщики логов
2) системы реагирования и управления инцидентами
3) системы обогащения базы ioC
4) анализаторы

SIEM.TheHieve
что может выстцпать в качестве индикатора дефрагментации: это хеши, домены, разные параметры, указывающие на то, что система скомпроментирована

SIEM.Cortex

Siem.playbooks