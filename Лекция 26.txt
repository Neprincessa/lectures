Лекция 26.

Tor:
Оверлейные сети: 
1) спрятаться от следящийх сайтов
2) обход ограничений в стране
3) для обхода корпоративных сайтов - дает доступ о внутрь корпоративной сети
4) спрятаться от провайдеров ( возможность спрятать метаданные)

Идентификация браузера:
1) куки
	panapticlick.eff.org 
	позволяет дать какую - то задачу, по времени вычисления можно получить данные, также по размеру экрана можно получить 

Proxy:
1) EPIC браузер
	данные через https да тут шифрование, а так все открыто ( 
2) Обнаружение трафика на FirePower. Идентификация попытки соединения к прокси
3) vpn
	комбинируйте vpn сервисы с прокси
	доп уровень анонимности
	надо доверять vpn провайдеру, что он не логирует ( обезопасить от идентификации !!!)

Надо обезопасить, чтобы данные не происходило dns утечек
	проверять утилиты не собирают ли метаданные, куда отправляют их
	chrome browser раскрывает реальный ip из -за dns prefetching

Deep Web / The dark web

Onion маршрутизатор
пассивыне атака через тор все равно могут идентифицировать


Как строится сеть Tor:
1) Relay
	ноды на которых установлен тор
	они строят соединения к другим relay, формируют наложенную сеть
	любой tor relay может внести свой вклад в сеть
	*надо ставить спец настройку, чтобы через вас не проходило выполнение чн не хорошего
2) при включении уже включены directory service
	браузер выбирает 3 ноды: гарден - entry node - только вход в сеть, 

Установка соединения: 
1) браузер - энтри нод: обмен хэндшейк
2) тор клиент посылает relay_extend к  OR1 - запрос на продление цепочки в сторону or2. обмен защищен публичным ключом
3) устанавливаем тунели

Tor Directory Authorities
Можно сравнивать хэши 
Всего 10 серверов. 

Список всех relay можно скачать со всеми флагами и временм жизни :

Различия и комбинации если https, tor

1) no tor, no https:
	все открыто
2) https, no tor - видно локацию, провайдер - локацию, на конечном сервере есть все 
3) tor, no https - провайдер видит использование тора
4) оба
	шик: принудительное подключение по https для предотвращения утечки данных

spylink - сбор инфы о пользователе

Тор: настройка количества нод через котор мб подключение 

Не прыгать между энтри нодами, ибо можно нарваться на злоум - ка

Мосты 
не анонсируется в релэй
не все можно получить
*relay могут иметь динамические адреса

Скрытые ресуры: .onion - hash of public key
в торе нет ip

Onionrouting:
принцип работы скрытых сервисов
hidden service получает список introduction points, с которым предварительно обменялись публичным ключом
rendezvous point  - установка сквозного тунеля между клиентом и ним: приватный - предоствляется introd, идем до onion, установка соединеня с рандеву. После использования рандеву исчезает, он одноразовый

HSDir функция хэширования:
	1) пересчитываение хэш ринга с определенной периодичностью
	Можно предсказать hsdir, потому что есть возможность блокирования
	В хэш ринг смешивается с солью, без нее предуагадать хэш нельзя

	subkey - конечнный ресурс может идентифицировать только пользователь

obfs2:
	отдельный ключ шифрования
obfs3:
	не устойчив к активному методу сканирования
obfs4: 
Domain fronting:
	отправление на домейн не принадлежащий сервису

когда есть доступ к сайту мимо необходимого ресурса

Обнаружение Tor;
WSA
	pass through просроченный сертификат
WSA логи

Рекомендации: 
	1) проверять валидность сертфикатов
	2) 

fire power:
	
	cognitive analytics

CTA, WSA - TOr detected :(
	обнаружение благодаря моб

Системы: Tor, Stealthwatch:
	криптоизвестные релэи, поведенческое составляющее влияет на выявление уязвимостей

Brave.com: 
TorChat: без идентификкации общение

I2P:
	поддержка асимметрчной маршрутизации 
	шифрование через различные тунели
	необходимо пробрасывание портов любых

Darknet - установка доверенной среды 
